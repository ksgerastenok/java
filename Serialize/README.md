Репозиторий содержит исходный код программы, выполняющей сериализацию строки чисел в строку, содержащую только ASCII символы.
Краткое описание работы алгоритма:
Согласно ТЗ, входными данными программы является список чисел в диапазоне 1..300 в количестве 1000.
Значит, числа могут (и будут) повторяться.
Поэтому, одним из возможных способов сериализации будет алгоритм, основанный на подсчете количества чисел.
Для увеличения степени сжатия будем использовать перевод в систему счисления с основанием 36.
Согласно ТЗ, максимальное количество чисел равно 1000, что соответствует 2 символам в системе счисления с основанием 36.
Максимально возможное число, которое можно представить 2 символами в системе счисления с основанием 36, равно 36^2 - 1 = 1295.
Для подсчета чисел и последующей сериализации можно использовать 2 способа:
  1. Использовать карту (ключ-значение), в которой ключом является число, а значением - количество чисел.
  2. Использовать массив из 300 элементов, где индекс соответствует числу, уменьшенному на 1 (поскольку числа начинаются с 1, а индекс - с 0), а значение - количеству чисел.
Исходный код программы содержит соответствующий Enum, выполняющий сериализацию одним из указанных выше способов:
  - ARRAY - на основе массива из 300 элементов.
  - COUNT - на основе карты ключ-значение. При этом, формируется строка ЧИСЛО:КОЛИЧЕСТВО.
  - STD - стандартное преобразование исходного списка в строку.
  - SMART - автоматически определяет, какой способ сериализации (ARRAY, COUNT) рационально использовать для данного набора чисел. Поскольку в исходном наборе могут встречаться не все числа из диапазона 1..300, то при сериализации по типу ARRAY результирующий массив будет содержать большое количество нулей. Можно подсчитать количество символов, занимаемых при этом. Пусть x - количество элементов массива, значение которых отлично от нуля. Для определенности, будем считать, что значение этих элементов кодируется двумя символами в системе счисления с основанием 36. Количество нулевых элементов будет равно 300 - x, а для кодирования значения нужен всего 1 символ. Помимо этого, требуется еще 300 - 1 символов на разделители (","). Таким образом, суммарное количество символов при использовании этого способа кодирования равно 2 * x + 1 * (300 - x) + 300 - 1 = x + 600 - 1. Если же используется тип сериализации COUNT, то для кодирования одного элемента нужно 5 символов - по 2 для кодирования самого числа и количества и 1 символ на разделитель (":"). Помимо этого, потребуется x - 1 символ на разделители (","). Таким образом, суммарное количество символов равно 5 * x + x - 1 = 6 * x - 1. Получаем неравенство, при выполнении условий которого выгоднее использовать метод сериализации COUNT по сравнению с ARRAY: 6 * x - 1 <= x + 600 - 1, откуда x <= 120. Т.е., если количество уникальных чисел не больше 120, выгоднее использовать метод сериализации COUNT, в противном случае - ARRAY.

Исходный код программы содержит реализацию перечисленных методов сериализации (преобразования исходного списка чисел в строку) и десериализации (преобразования строки в исходный список чисел). Тесты, выводящие исходную строку (с использованием стандартного метода сериализации), результирующую строку (с использованием метода сериализации SMART) и отношение длин этих строк (в %) как коэффициент сжатия, находятся в данном репозитории.
